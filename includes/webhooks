<h1 id='webhooks'>Webhooks</h1>
<p>You can configure webhook endpoints via the API to be notified about events that happen.</p>

<p><code>POST</code> payloads that are delivered to your webhook&#39;s configured URL endpoint will contain special header:</p>

<p><code>X-API-SIGNATURE</code> - The HMAC hex digest of the response body. Each webhook have own generated <code>secret</code>.
The HMAC hex digest is generated using the <code>sha256</code> hash function and the secret as the HMAC <code>key</code>.</p>

<p>Webhook endpoint must have a url and type.
Type is related to webhook event.</p>

<p>Valid types:</p>

<p><code>optionSelected</code> - Event fired when user click on predefined answer in email.</p>

<p>Response fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when event fired.</td>
</tr>
<tr>
<td>surveyItemId</td>
<td>string</td>
<td>Id of survey item, that contain question.</td>
</tr>
<tr>
<td>meta</td>
<td>object</td>
<td>Result meta object from invitation.</td>
</tr>
<tr>
<td>question</td>
<td>object</td>
<td>Question object.</td>
</tr>
<tr>
<td>answer</td>
<td>object</td>
<td>Answer value (id or number).</td>
</tr>
</tbody></table>

<p><code>surveyCompleted</code> - Event fired when user complete survey.</p>

<p>Response fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>string</td>
<td>Time when event fired.</td>
</tr>
<tr>
<td>meta</td>
<td>object</td>
<td>Result meta object from invitation.</td>
</tr>
</tbody></table>

<p><code>*</code> - Wildcard event, set this if you want to receive all events to one endpoint.</p>
<h2 id='create-webhook'>Create webhook</h2><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/api/v2/webhooks</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer u8ptxAd2hJ3aRjtgwwmUqqkNpcMOYxf3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">https://go.screver.com</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optionSelected"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>The above request returns the following response:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d9b4816de62163caf637d5c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optionSelected"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d00f1e3001530581cc1ea85"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f6353acf-bca0-4992-8313-0d509f80c4f1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-07T14:13:42.489Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-07T14:13:42.489Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"__v"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request'>HTTP Request</h3>
<p><code>POST /api/v2/webhooks</code></p>
<h3 id='body'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Valid</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>Webhook type.</td>
<td><code>optionSelected</code>, <code>surveyCompleted</code>, <code>*</code></td>
<td>No</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>Webhook callback url.</td>
<td>any</td>
<td>No</td>
</tr>
</tbody></table>
<h2 id='update-webhook-by-id'>Update webhook by id</h2><pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/api/v2/webhooks/5d9b4816de62163caf637d5c</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer u8ptxAd2hJ3aRjtgwwmUqqkNpcMOYxf3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">https://go.screver.com</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optionSelected"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>The above request returns the following response:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optionSelected"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d9b4816de62163caf637d5c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f6353acf-bca0-4992-8313-0d509f80c4f1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-07T14:13:42.489Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-07T14:30:05.313Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-2'>HTTP Request</h3>
<p><code>PUT /api/v2/webhooks/:id</code></p>
<h3 id='body-2'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Valid</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>Webhook type.</td>
<td><code>optionSelected</code>, <code>surveyCompleted</code>, <code>*</code></td>
<td>No</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>Webhook callback url.</td>
<td>any</td>
<td>No</td>
</tr>
</tbody></table>
<h2 id='get-list-of-webhooks-with-base-data'>Get list of webhooks with base data.</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v2/webhooks?limit=5</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer u8ptxAd2hJ3aRjtgwwmUqqkNpcMOYxf3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">https://go.screver.com</span>
</code></pre>
<blockquote>
<p>The above request returns the following response:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d9c378127a91314f83f9802"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surveyCompleted"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09e90103-3dc9-4378-9402-c58e87d38ddd"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T07:15:13.945Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T07:15:13.945Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d9c377c27a91314f83f9801"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optionSelected"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33d30530-fe4b-469e-9e14-e9ef19b9775b"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T07:15:08.517Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T07:15:08.517Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d9c377227a91314f83f97ff"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"970808e3-52ac-4d8c-b584-5c8123a72698"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T07:14:58.136Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T07:14:58.136Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d9c376c27a91314f83f97fe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"surveyCompleted"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2d2693b-f1ad-44c4-b9b6-0cf3534dd00b"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T07:14:52.361Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T07:14:52.361Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d9b4b4ede62163caf637d5d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optionSelected"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b629c44-e283-44ef-946c-8bce5f014e88"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-07T14:27:26.908Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T07:14:40.734Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /api/v2/webhooks</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Valid</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>skip</td>
<td>number</td>
<td>Count of skipped items for pagination.</td>
<td>any</td>
<td>No</td>
</tr>
<tr>
<td>limit</td>
<td>number</td>
<td>Count of returned items in response.</td>
<td><code>5</code>, <code>10</code>, <code>25</code>, <code>50</code>, <code>100</code></td>
<td>Yes</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>Sort object, with single key: key - sort field, value - order (<code>1</code> - <code>ASC</code>, <code>-1</code> - <code>DESC</code>). Example: <code>{ createdAt: -1 }</code></td>
<td><code>createdAt</code>, <code>updatedAt</code></td>
<td>No</td>
</tr>
</tbody></table>
<h2 id='get-specific-webhook-by-id-with-all-related-data'>Get specific webhook by ID with all related data.</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v2/webhooks/5d0b985960a1da78cf8f4a57</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer u8ptxAd2hJ3aRjtgwwmUqqkNpcMOYxf3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">https://go.screver.com</span>
</code></pre>
<blockquote>
<p>The above request returns the following response:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d9b4b4ede62163caf637d5d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optionSelected"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://go.screver.com/api/v1/test-webhook"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b629c44-e283-44ef-946c-8bce5f014e88"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-07T14:27:26.908Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-07T14:27:26.908Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /api/v2/webhooks/:id</code></p>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Id of specific webhook.</td>
<td>Yes</td>
</tr>
</tbody></table>
<h2 id='delete-webhook-by-id'>Delete webhook by id</h2><pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/api/v2/webhooks/5d10840f5b4ca0038509890c</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer u8ptxAd2hJ3aRjtgwwmUqqkNpcMOYxf3</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">https://go.screver.com</span>
</code></pre>
<blockquote>
<p>The above request returns the following response:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No content</span>
</code></pre><h3 id='http-request-5'>HTTP Request</h3>
<p><code>DELETE /api/v2/webhooks/:id</code></p>
<h3 id='query-parameters-3'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Id of specific webhook.</td>
<td>Yes</td>
</tr>
</tbody></table>
